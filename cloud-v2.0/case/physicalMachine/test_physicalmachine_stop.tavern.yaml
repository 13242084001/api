---
test_name: 3_硬件设施-物理机-停用物理机|physicalMachine

includes:
  - !include ../test_login.yaml
  - !include query_physicalmachine.yaml

stages:
  - type: ref
    id: login_get_cookie
  - type: ref
    id: query_physicalmachine
  - name: 验证停止物理机
    request:
      url: "{url}/physicalmachine/stop.do"
      method: POST
      verify: false
      headers:
        Cookie: "{cookie}"
      data:
        hostid: "{hostid}"
        logAction[id]: 1703
        logAction[name]: "{pmname}"
        logAction[async]: 1

    response:
      status_code: 200
      verify_response_with:
        function: verify.verify:check_stop_start_pysicalmachine_ok

    delay_after: 1